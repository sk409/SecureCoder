{
    "index": 0,
    "fileName": "welcome.php",
    "explainers": [
        {
            "questionIndices": [],
            "focusLabels": [],
            "focusComponents": [],
            "messages": [
                {
                    "text": "これはユーザの名前と年齢を受け取って登録するだけの簡単なWebページです。\n体験編ではこのページ内にあえて脆弱性を作り込むことで、どのようなコードを書くと攻撃を受けてしまうのかを学習しました。",
                    "languages": []
                },
                {
                    "text": "具体的には、属性値を引用符で囲まずに記述したために攻撃者に属性値を埋め込まれ、アラートを表示させられてしまいました。",
                    "languages": []
                },
                {
                    "text": "今回はその攻撃の対策を学習しますが、属性を引用符で囲むだけなので特に難しいことはありません。\nただし、1つだけ注意しておきたいことがあります。\nそれは、属性値を「'」ではなく「\"」で囲むということです。",
                    "languages": []
                },
                {
                    "text": "なぜ「\"」で囲むようにするのかというと、PHPが標準で提供しているhtmlspecialcharsという関数がデフォルトでは「'」をエスケープしないからです。\n詳しくは同セクションの「ENT_QUOTESについて」というレッスンで解説していますのでそちらを参考にしてください。",
                    "languages": []
                },
                {
                    "text": "それでは実際に対策を行っていきましょう。",
                    "languages": []
                }
            ]
        },
        {
            "questionIndices": [],
            "focusLabels": [],
            "focusComponents": [
                [4, 5, 6, 7]
            ],
            "messages": [
                {
                    "text": "体験編ではこの赤枠で囲まれた部分に脆弱性を作り込みました。\n以下にその時書いたコードを示します。\nvalue=<?php echo htmlspecialchars($_GET[\"name\"], ENT_QUOTES); ?>",
                    "languages": ["php"]
                },
                {
                    "text": "属性値を引用符で囲っていないため、スペースが属性と属性の区切り文字として使用されます。\nよって、属性値にスペースを含む値が設定されるとスペース以降は全く独立した属性として解釈されてしまいます。",
                    "languages": [
                        
                    ]
                },
                {
                    "text": "体験編では攻撃者にこの脆弱性を狙われ、value属性にスペースを含む値を設定され新たな属性としてonclickを埋め込まれてしまう事例を見てきました。",
                    "languages": ["html"]
                },
                {
                    "text": "この攻撃への対策として今回はしっかりと引用符で囲んでいきますが、脆弱性を作り込んでしまう可能性のある「'」ではなく「\"」で囲っていきます。\nそれでは実際に問題を解いてみましょう。",
                    "languages": []
                }
            ]
        },
        {
            "questionIndices": [0, 1],
            "focusLabels": [],
            "focusComponents": [
            ],
            "messages": [
                {
                    "text": "属性値を引用符で囲っているため、スペースを用いて属性を埋め込むことは不可能となっています。",
                    "languages": [
                    ]
                },
                {
                    "text": "今回の説明はこれで以上です。\n他のファイルは体験編で見たものと全く同じなので詳しくはそちらを参照してください。",
                    "languages": []
                },
                {
                    "text": "それでは実際にプレビューを確認してみましょう。",
                    "languages": []
                }
            ]
        }
    ]
}